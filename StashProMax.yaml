# By：Steve
# 最后一次更新：2024.01.20
# TG频道：https://t.me/st7eve
# 下载配置后,请手动添加机场订阅
# 下载链接：https://gh.surgee.me/https://raw.githubusercontent.com/zxfccmm4/Surge/main/StashProMax.yaml
# 找到 {远程订阅} 部分，将SF 里面的 '改成你的订阅' 替换为 自己的机场订阅链接  

port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  default-nameserver:
    - 127.0.0.1:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - 'time.nist.gov'
    - 'time.apple.com'
    - 'time.asia.apple.com'
    - '*.ntp.org.cn'
    - '*.openwrt.pool.ntp.org'
    - 'time1.cloud.tencent.com'
    - 'time.ustc.edu.cn'
    - 'pool.ntp.org'
    - 'ntp.ubuntu.com'
    - 'ntp.aliyun.com'
    - 'ntp1.aliyun.com'
    - 'ntp2.aliyun.com'
    - 'ntp3.aliyun.com'
    - 'ntp4.aliyun.com'
    - 'ntp5.aliyun.com'
    - 'ntp6.aliyun.com'
    - 'ntp7.aliyun.com'
    - 'time1.aliyun.com'
    - 'time2.aliyun.com'
    - 'time3.aliyun.com'
    - 'time4.aliyun.com'
    - 'time5.aliyun.com'
    - 'time6.aliyun.com'
    - 'time7.aliyun.com'
    - '*.time.edu.cn'
    - 'time1.apple.com'
    - 'time2.apple.com'
    - 'time3.apple.com'
    - 'time4.apple.com'
    - 'time5.apple.com'
    - 'time6.apple.com'
    - 'time7.apple.com'
    - 'time1.google.com'
    - 'time2.google.com'
    - 'time3.google.com'
    - 'time4.google.com'
    - 'music.163.com'
    - '*.music.163.com'
    - '*.126.net'
    - 'musicapi.taihe.com'
    - 'music.taihe.com'
    - 'songsearch.kugou.com'
    - 'trackercdn.kugou.com'
    - '*.kuwo.cn'
    - 'api-jooxtt.sanook.com'
    - 'api.joox.com'
    - 'joox.com'
    - 'y.qq.com'
    - '*.y.qq.com'
    - 'streamoc.music.tc.qq.com'
    - 'mobileoc.music.tc.qq.com'
    - 'isure.stream.qqmusic.qq.com'
    - 'dl.stream.qqmusic.qq.com'
    - 'aqqmusic.tc.qq.com'
    - 'amobile.music.tc.qq.com'
    - '*.xiami.com'
    - '*.music.migu.cn'
    - 'music.migu.cn'
    - '*.msftconnecttest.com'
    - '*.msftncsi.com'
    - 'localhost.ptlogin2.qq.com'
    - '*.*.*.srv.nintendo.net'
    - '*.*.stun.playstation.net'
    - 'xbox.*.*.microsoft.com'
    - '*.*.xboxlive.com'
    - 'proxy.golang.org'
    - '*.sgcc.com.cn'
    - '*.alicdn.com'
    - '*.aliyuncs.com'
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
proxies: 
  - name: 'itcz.xyz_vmess_ws'
    type: vless
    server: www.itcut.lol
    port: 443
    uuid: 8a0d38d1-8a07-45a1-b11c-aacab86b2eb8
    skip-cert-verify: false
    network: ws
    tls: true
    ws-opts:
      path: /ef6ec544ea86c/
      headers:
        Host: www.itcut.lol

proxy-groups:
  - name: PROXY
    type: select
    proxies: 
      - itcz.xyz_vmess_ws

rule-providers:
  # 远程规则集
  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 43400

  greatfire:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 43400

  netflix-site:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/itcut/Netflix/main/netflix-site.txt"
    path: ./ruleset/netflix-site.yaml
    interval: 43400

  netflix-ip:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/itcut/Netflix/main/netflix-ip.txt"
    path: ./ruleset/netflix-ip.yaml
    interval: 43400

  disney-site:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/itcut/Disney/main/disney-site.txt"
    path: ./ruleset/disney-site.yaml
    interval: 43400

  adtest:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/itcut/Netflix/main/ad.txt"
    path: ./ruleset/adtest.yaml
    interval: 43400

  BanEasyListChina:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanEasyListChina.yaml"
    path: ./ruleset/EasyListChina.yaml
    interval: 43400

  BanAD:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanAD.yaml"
    path: ./ruleset/BanAD.yaml
    interval: 43400

  BanEasyPrivacy:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanEasyPrivacy.yaml"
    path: ./ruleset/BanEasyPrivacy.yaml
    interval: 43400

  BanProgramAD:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanProgramAD.yaml"
    path: ./ruleset/BanProgramAD.yaml
    interval: 43400
    
rules:
 - DOMAIN-SUFFIX,push.apple.com,DIRECT
 - DOMAIN-SUFFIX,www.itcut.lol,DIRECT
 - DOMAIN-SUFFIX,local.adguard.org,REJECT
 - DOMAIN-SUFFIX,eco.taobao.com,REJECT
 - DOMAIN-SUFFIX,dtapp-pub.dingtalk.com,REJECT
 - DOMAIN-SUFFIX,yun.duiba.com.cn,DIRECT
 - DOMAIN-KEYWORD,64793.activity-,DIRECT
 - DOMAIN-KEYWORD,67766.activity-12,DIRECT
 - RULE-SET,adtest,REJECT
 - IP-CIDR,13.107.4.52/32,PROXY,no-resolve
 - RULE-SET,private,DIRECT
 - DOMAIN-SUFFIX,github.com,PROXY
 - DOMAIN-SUFFIX,bing.com,PROXY
 - DOMAIN-SUFFIX,bing.net,PROXY
 - DOMAIN-KEYWORD,dualstack.apiproxy-device-prod-nlb-,PROXY
 - DOMAIN-KEYWORD,dualstack.ichnaea-web-,PROXY
 - RULE-SET,disney-site,PROXY
 - SRC-IP-CIDR,192.168.1.170/32,PROXY
 - RULE-SET,netflix-site,PROXY
 - RULE-SET,netflix-ip,PROXY,no-resolve
 - RULE-SET,greatfire,PROXY
 - RULE-SET,BanEasyListChina,REJECT
 - RULE-SET,BanAD,REJECT
 - RULE-SET,BanEasyPrivacy,REJECT
 - RULE-SET,BanProgramAD,REJECT
 - GEOIP,CN,DIRECT
 - IP-CIDR,0.0.0.0/32,REJECT
 - MATCH,PROXY
